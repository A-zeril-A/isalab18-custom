<?xml version="1.0" encoding="UTF-8"?>
<!-- 
    Created by A_zeril_A, 2025-10-24
    This form view replaces the formio form builder with a modern, single-page Odoo form.
    Design: Professional, modern UI similar to React-based forms, all sections in one scrollable page.
-->
<odoo>
    <record id="view_business_trip_form_page" model="ir.ui.view">
        <field name="name">business.trip.form.page</field>
        <field name="model">business.trip</field>
        <field name="arch" type="xml">
            <form string="Business Trip Request Form" create="0" delete="0" class="o_business_trip_modern_form">
                <header>
                    <!-- Form Completion Status Bar -->
                    <field name="form_completion_status" widget="statusbar" 
                           statusbar_visible="awaiting_completion,form_completed"
                           decoration-info="form_completion_status == 'awaiting_completion'"
                           decoration-success="form_completion_status == 'form_completed'"
                           decoration-danger="form_completion_status == 'cancelled'"
                           readonly="1"/>
                    
                    <!-- Trip Workflow Status Bar - visible only after form is completed -->
                    <!-- This statusbar has been commented out as per user request -->
                    <!--
                    <field name="trip_status" widget="statusbar" 
                           statusbar_visible="draft,submitted,pending_organization,organization_done,completed_waiting_expense,completed"
                           invisible="form_completion_status != 'form_completed'"
                           readonly="1"/>
                    -->
                    
                    <!-- Submit for Approval Button - visible when form is completed and trip is in draft/returned status
                    <button name="action_submit_to_manager" type="object" string="Submit for Approval"
                        class="oe_highlight"
                        invisible="form_completion_status != 'form_completed' or trip_status not in ('draft', 'returned') or is_current_user_owner == False"
                        confirm="Are you sure you want to submit this trip request for approval?"/> -->
                </header>
                <sheet>
                    <!-- Save & Done button at top - only visible when form is awaiting completion -->
                    <div class="o_form_buttons_top" invisible="form_completion_status != 'awaiting_completion'">
                        <button name="action_save_and_complete_form" string="Save &amp; Done" type="object" 
                                class="btn-success o_form_button_save_done"/>
                    </div>
                    <!-- Hidden fields for conditional logic -->
                    <!-- <field name="form_completion_status" invisible="1"/> REMOVED - Already defined in statusbar -->
                    <field name="trip_status" invisible="1"/>
                    <field name="is_current_user_owner" invisible="1"/>
                    <field name="trip_type" invisible="1"/>
                    <field name="accommodation_needed" invisible="1"/>
                    <field name="use_rental_car" invisible="1"/>
                    <field name="use_train" invisible="1"/>
                    <field name="use_bus" invisible="1"/>
                    <field name="use_airplane" invisible="1"/>
                    <field name="use_return_rental_car" invisible="1"/>
                    <field name="use_return_train" invisible="1"/>
                    <field name="use_return_bus" invisible="1"/>
                    <field name="use_return_airplane" invisible="1"/>
                    <!-- Removed: rental_car_unlimited_km and return_rental_car_unlimited_km - needed for invisible conditions -->
                    <!-- Removed: rental_car_type and return_rental_car_type - needed for invisible conditions -->
                    
                    <!-- Modern Card-based Layout -->
                    <div class="o_trip_form_container">
                        
                        <!-- Header Section -->
                        <div class="o_trip_header_card">
                            <div class="o_trip_title">
                                <h1><field name="name" readonly="1" class="o_trip_name_field"/></h1>
                            </div>
                        </div>
                        
                        <!-- Section 1: Personal Information & Trip Overview -->
                        <div class="o_form_section_card">
                            <div class="o_section_header">
                                <span class="o_section_icon">üë§</span>
                                <h2>Personal Information &amp; Trip Details</h2>
                            </div>
                            <div class="o_section_content">
                                <group>
                                    <group string="Personal Information">
                                        <field name="full_name" string="Full Name" readonly="1" 
                                               help="Your full name as registered in the system"/>
                                    </group>
                                    <group string="Trip Dates">
                                        <field name="travel_start_date" string="Proposed Start Date" 
                                               help="The date you plan to start your trip"/>
                                        <field name="travel_end_date" string="Proposed End Date" 
                                               help="The date you plan to return from your trip"/>
                                        <field name="submission_date" string="Submission Date" readonly="1" 
                                               help="The date this form was created"/>
                                    </group>
                                </group>
                                
                                <group>
                                    <group string="Trip Details">
                                        <field name="approving_colleague_name" string="Name of Approving Colleague" 
                                               placeholder="E.g., Emily Smith"
                                               help="Auto-filled with your Travel Approver's name, but you can change it if needed"/>
                                        <field name="trip_duration_type" string="Trip Duration Type"
                                               help="Select the duration type of your trip (full day, half day, etc.)"/>
                                        <field name="destination" string="Destination"
                                               placeholder="Type to search for a destination city"
                                               help="Enter the city or location you will be traveling to"/>
                                    </group>
                                    <group string="Trip Type">
                                        <field name="trip_type" string="One Way / Two Way" widget="radio" 
                                               options="{'horizontal': true}" default="one_way"
                                               help="Select 'One Way' for single direction travel or 'Two Way' for round trip"/>
                                    </group>
                                </group>
                                
                                <group col="2" colspan="2">
                                    <field name="purpose" string="Purpose of Trip" widget="text" 
                                           placeholder="Describe the purpose of your trip" colspan="2"
                                           options="{'resizable': false}"
                                           help="Provide a detailed description of the purpose and objectives of this business trip"/>
                                </group>
                            </div>
                        </div>
                        
                        <!-- Section 2: Departure Transportation -->
                        <div class="o_form_section_card">
                            <div class="o_section_header">
                                <span class="o_section_icon">üõ´</span>
                                <h2>Departure Transportation</h2>
                            </div>
                            <div class="o_section_content">
                                <div class="alert alert-info" role="alert">
                                    Select all means of transport you will use for your outbound trip.
                                </div>
                                
                                <group>
                                    <group>
                                        <field name="use_rental_car" string="üöò Rental Car" 
                                               help="Check if you need to rent a car for this trip"/>
                                        <field name="use_company_car" string="üöó Company Car" 
                                               help="Check if you will use a company-owned vehicle"/>
                                        <field name="use_personal_car" string="üöô Personal Car" 
                                               help="Check if you will use your personal vehicle"/>
                                    </group>
                                    <group>
                                        <field name="use_train" string="üöÑ Train" 
                                               help="Check if you will travel by train"/>
                                        <field name="use_airplane" string="‚úà Airplane" 
                                               help="Check if you will travel by airplane"/>
                                        <field name="use_bus" string="üöç Bus" 
                                               help="Check if you will travel by bus"/>
                                    </group>
                                </group>
                                
                                <!-- Rental Car Details -->
                                <div class="o_transport_detail_section o_transport_rental_car" invisible="use_rental_car == False">
                                    <div class="o_transport_detail_header">
                                        <h3>Rental Car Details</h3>
                                    </div>
                                    <group>
                                        <group>
                                            <field name="rental_car_pickup_date" string="Pick-up Date"
                                                   help="Date when you will pick up the rental car"/>
                                            <field name="rental_car_pickup_flexible" string="Flexible by 2 days"
                                                   help="Check if your pick-up date can be adjusted by ¬±2 days"/>
                                            <field name="rental_car_pickup_point" string="Pick-up Point" 
                                                   placeholder="E.g., Rome Airport"
                                                   help="Location where you will pick up the car"/>
                                            <field name="rental_car_dropoff_point" string="Drop-off Point" 
                                                   placeholder="E.g., Milan Central Station"
                                                   help="Location where you will drop off the car"/>
                                            <field name="rental_car_dropoff_date" string="Drop-off Date"
                                                   help="Date when you will drop off the rental car"/>
                                            <field name="rental_car_dropoff_flexible" string="Flexible by 2 days"
                                                   help="Check if your drop-off date can be adjusted by ¬±2 days"/>
                                        </group>
                                        <group>
                                            <field name="rental_car_credit_card" string="Can you use your credit card?"
                                                   help="Most car rentals require a credit card for deposit"/>
                                            <field name="rental_car_type" string="Rental Type"
                                                   help="Select who will drive the rental car"/>
                                            <field name="rental_car_drivers_license" string="Driver's License" widget="binary" 
                                                   filename="rental_car_drivers_license_filename"
                                                   invisible="rental_car_type != 'self'"
                                                   help="Upload a copy of your valid driver's license"/>
                                            <field name="rental_car_unlimited_km" string="Unlimited Kilometers"
                                                   help="Check if you need unlimited mileage"/>
                                            <field name="rental_car_kilometer_limit" string="Kilometer Limit" 
                                                   invisible="rental_car_unlimited_km == True"
                                                   help="Estimated kilometers you will drive"/>
                                        </group>
                                    </group>
                                    <group>
                                        <field name="rental_car_preferences" string="Additional Preferences" 
                                               widget="text" placeholder="E.g., early morning pick-up, car model preferences" colspan="2"
                                               help="Any special requirements or preferences for your rental car"/>
                                    </group>
                                </div>
                                
                                <!-- Train Details -->
                                <div class="o_transport_detail_section o_transport_train" invisible="use_train == False">
                                    <div class="o_transport_detail_header">
                                        <h3>Train Details</h3>
                                    </div>
                                    <group>
                                        <group>
                                            <field name="train_departure_city" string="Departure City" placeholder="E.g., Rome"
                                                   help="City where you will board the train"/>
                                            <field name="train_departure_station" string="Departure Station" 
                                                   placeholder="E.g., Roma Termini"
                                                   help="Train station where you will depart from"/>
                                            <field name="train_arrival_station" string="Arrival Station" 
                                                   placeholder="E.g., Milano Centrale"
                                                   help="Train station where you will arrive"/>
                                        </group>
                                        <group>
                                            <field name="train_departure_date" string="Departure Date"
                                                   help="Date of your train departure"/>
                                            <field name="train_departure_flexible" string="Flexible by 2 days"
                                                   help="Check if your departure date can be adjusted by ¬±2 days"/>
                                            <field name="train_arrival_date" string="Arrival Date"
                                                   help="Expected date of arrival"/>
                                            <field name="train_arrival_flexible" string="Flexible by 2 days"
                                                   help="Check if your arrival date can be adjusted by ¬±2 days"/>
                                        </group>
                                    </group>
                                </div>
                                
                                <!-- Bus Details -->
                                <div class="o_transport_detail_section o_transport_bus" invisible="use_bus == False">
                                    <div class="o_transport_detail_header">
                                        <h3>Bus Details</h3>
                                    </div>
                                    <group>
                                        <group>
                                            <field name="bus_departure_city" string="Departure City" placeholder="E.g., Rome"
                                                   help="City where you will board the bus"/>
                                            <field name="bus_departure_terminal" string="Departure Terminal" 
                                                   placeholder="E.g., Roma Tiburtina"
                                                   help="Bus terminal where you will depart from"/>
                                            <field name="bus_arrival_terminal" string="Arrival Terminal" 
                                                   placeholder="E.g., Milano Lampugnano"
                                                   help="Bus terminal where you will arrive"/>
                                        </group>
                                        <group>
                                            <field name="bus_departure_date" string="Departure Date"
                                                   help="Date of your bus departure"/>
                                            <field name="bus_departure_flexible" string="Flexible by 2 days"
                                                   help="Check if your departure date can be adjusted by ¬±2 days"/>
                                            <field name="bus_arrival_date" string="Arrival Date"
                                                   help="Expected date of arrival"/>
                                            <field name="bus_arrival_flexible" string="Flexible by 2 days"
                                                   help="Check if your arrival date can be adjusted by ¬±2 days"/>
                                        </group>
                                    </group>
                                </div>
                                
                                <!-- Airplane Details -->
                                <div class="o_transport_detail_section o_transport_airplane" invisible="use_airplane == False">
                                    <div class="o_transport_detail_header">
                                        <h3>Airplane Details</h3>
                                    </div>
                                    <group>
                                        <group>
                                            <field name="airplane_departure_airport" string="Departure Airport" 
                                                   placeholder="E.g., Rome Fiumicino"
                                                   help="Airport where your flight will depart from"/>
                                            <field name="airplane_departure_date" string="Departure Date"
                                                   help="Date of your flight departure"/>
                                            <field name="airplane_departure_flexible" string="Flexible by 2 days (departure)"
                                                   help="Check if your departure date can be adjusted by ¬±2 days"/>
                                        </group>
                                        <group>
                                            <field name="airplane_arrival_airport" string="Arrival Airport" 
                                                   placeholder="E.g., Paris CDG"
                                                   help="Airport where your flight will arrive"/>
                                            <field name="airplane_arrival_flexible" string="Flexible by 2 days (arrival)"
                                                   help="Check if your arrival date can be adjusted by ¬±2 days"/>
                                            <field name="airplane_baggage_type" string="Baggage"
                                                   help="Select your baggage requirements (carry-on only, checked baggage, etc.)"/>
                                        </group>
                                    </group>
                                    <group>
                                        <field name="airplane_preferences" string="Additional Preferences" 
                                               widget="text" placeholder="E.g., seat preference, early flight" colspan="2"
                                               help="Any special requirements or preferences for your flight"/>
                                    </group>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Section 3: Return Transportation (conditional on trip_type) -->
                        <div class="o_form_section_card" invisible="trip_type != 'twoWay'">
                            <div class="o_section_header">
                                <span class="o_section_icon">üõ¨</span>
                                <h2>Return Transportation</h2>
                            </div>
                            <div class="o_section_content">
                                <div class="alert alert-info" role="alert">
                                    Select all means of transport you will use for your return trip.
                                </div>
                                
                                <group>
                                    <group>
                                        <field name="use_return_rental_car" string="üöò Rental Car"
                                               help="Check if you need to rent a car for your return trip"/>
                                        <field name="use_return_company_car" string="üöó Company Car"
                                               help="Check if you will use a company-owned vehicle for return"/>
                                        <field name="use_return_personal_car" string="üöô Personal Car"
                                               help="Check if you will use your personal vehicle for return"/>
                                    </group>
                                    <group>
                                        <field name="use_return_train" string="üöÑ Train"
                                               help="Check if you will travel by train on return"/>
                                        <field name="use_return_airplane" string="‚úà Airplane"
                                               help="Check if you will travel by airplane on return"/>
                                        <field name="use_return_bus" string="üöç Bus"
                                               help="Check if you will travel by bus on return"/>
                                    </group>
                                </group>
                                
                                <!-- Return Rental Car Details -->
                                <div class="o_transport_detail_section o_transport_rental_car" invisible="use_return_rental_car == False">
                                    <div class="o_transport_detail_header">
                                        <h3>Return Rental Car Details</h3>
                                    </div>
                                    <group>
                                        <group>
                                            <field name="return_rental_car_pickup_date" string="Pick-up Date"
                                                   help="Date when you will pick up the return rental car"/>
                                            <field name="return_rental_car_pickup_flexible" string="Flexible by 2 days"
                                                   help="Check if your pick-up date can be adjusted by ¬±2 days"/>
                                            <field name="return_rental_car_pickup_point" string="Pick-up Point" 
                                                   placeholder="E.g., Milan Central Station"
                                                   help="Location where you will pick up the return car"/>
                                            <field name="return_rental_car_dropoff_point" string="Drop-off Point" 
                                                   placeholder="E.g., Rome Airport"
                                                   help="Location where you will drop off the return car"/>
                                            <field name="return_rental_car_dropoff_date" string="Drop-off Date"
                                                   help="Date when you will drop off the return rental car"/>
                                            <field name="return_rental_car_dropoff_flexible" string="Flexible by 2 days"
                                                   help="Check if your drop-off date can be adjusted by ¬±2 days"/>
                                        </group>
                                        <group>
                                            <field name="return_rental_car_credit_card" string="Can you use your credit card?"
                                                   help="Most car rentals require a credit card for deposit"/>
                                            <field name="return_rental_car_type" string="Rental Type"
                                                   help="Select who will drive the return rental car"/>
                                            <field name="return_rental_car_drivers_license" string="Driver's License" 
                                                   widget="binary" filename="return_rental_car_drivers_license_filename"
                                                   invisible="return_rental_car_type != 'self'"
                                                   help="Upload a copy of your valid driver's license"/>
                                            <field name="return_rental_car_unlimited_km" string="Unlimited Kilometers"
                                                   help="Check if you need unlimited mileage for return trip"/>
                                            <field name="return_rental_car_kilometer_limit" string="Kilometer Limit" 
                                                   invisible="return_rental_car_unlimited_km == True"
                                                   help="Estimated kilometers you will drive on return"/>
                                        </group>
                                    </group>
                                    <group>
                                        <field name="return_rental_car_preferences" string="Additional Preferences" 
                                               widget="text" placeholder="E.g., late evening drop-off, car model preferences" colspan="2"
                                               help="Any special requirements or preferences for your return rental car"/>
                                    </group>
                                </div>
                                
                                <!-- Return Train Details -->
                                <div class="o_transport_detail_section o_transport_train" invisible="use_return_train == False">
                                    <div class="o_transport_detail_header">
                                        <h3>Return Train Details</h3>
                                    </div>
                                    <group>
                                        <group>
                                            <field name="return_train_departure_city" string="Departure City" placeholder="E.g., Milan"
                                                   help="City where you will board the return train"/>
                                            <field name="return_train_departure_station" string="Departure Station" 
                                                   placeholder="E.g., Milano Centrale"
                                                   help="Train station where you will depart from on return"/>
                                            <field name="return_train_arrival_station" string="Arrival Station" 
                                                   placeholder="E.g., Roma Termini"
                                                   help="Train station where you will arrive on return"/>
                                        </group>
                                        <group>
                                            <field name="return_train_departure_date" string="Departure Date"
                                                   help="Date of your return train departure"/>
                                            <field name="return_train_departure_flexible" string="Flexible by 2 days"
                                                   help="Check if your departure date can be adjusted by ¬±2 days"/>
                                            <field name="return_train_arrival_date" string="Arrival Date"
                                                   help="Expected date of arrival on return"/>
                                            <field name="return_train_arrival_flexible" string="Flexible by 2 days"
                                                   help="Check if your arrival date can be adjusted by ¬±2 days"/>
                                        </group>
                                    </group>
                                </div>
                                
                                <!-- Return Airplane Details -->
                                <div class="o_transport_detail_section o_transport_airplane" invisible="use_return_airplane == False">
                                    <div class="o_transport_detail_header">
                                        <h3>Return Airplane Details</h3>
                                    </div>
                                    <group>
                                        <group>
                                            <field name="return_airplane_departure_airport" string="Departure Airport" 
                                                   placeholder="E.g., Paris CDG"
                                                   help="Airport where your return flight will depart from"/>
                                            <field name="return_airplane_departure_date" string="Departure Date"
                                                   help="Date of your return flight departure"/>
                                            <field name="return_airplane_departure_flexible" string="Flexible by 2 days (departure)"
                                                   help="Check if your return departure date can be adjusted by ¬±2 days"/>
                                        </group>
                                        <group>
                                            <field name="return_airplane_destination_airport" string="Arrival Airport" 
                                                   placeholder="E.g., Rome Fiumicino"
                                                   help="Airport where your return flight will arrive"/>
                                            <field name="return_airplane_destination_flexible" string="Flexible by 2 days (arrival)"
                                                   help="Check if your return arrival date can be adjusted by ¬±2 days"/>
                                            <field name="return_airplane_baggage_type" string="Baggage"
                                                   help="Select your baggage requirements for return flight"/>
                                        </group>
                                    </group>
                                    <group>
                                        <field name="return_airplane_preferences" string="Additional Preferences" 
                                               widget="text" placeholder="E.g., seat preference, late evening flight" colspan="2"
                                               help="Any special requirements or preferences for your return flight"/>
                                    </group>
                                </div>
                                
                                <!-- Return Bus Details -->
                                <div class="o_transport_detail_section o_transport_bus" invisible="use_return_bus == False">
                                    <div class="o_transport_detail_header">
                                        <h3>Return Bus Details</h3>
                                    </div>
                                    <group>
                                        <group>
                                            <field name="return_bus_departure_city" string="Departure City" placeholder="E.g., Milan"
                                                   help="City where you will board the return bus"/>
                                            <field name="return_bus_departure_station" string="Departure Station" 
                                                   placeholder="E.g., Milano Lampugnano"
                                                   help="Bus terminal where you will depart from on return"/>
                                            <field name="return_bus_arrival_station" string="Arrival Station" 
                                                   placeholder="E.g., Roma Tiburtina"
                                                   help="Bus terminal where you will arrive on return"/>
                                        </group>
                                        <group>
                                            <field name="return_bus_departure_date" string="Departure Date"
                                                   help="Date of your return bus departure"/>
                                            <field name="return_bus_departure_flexible" string="Flexible by 2 days"
                                                   help="Check if your departure date can be adjusted by ¬±2 days"/>
                                            <field name="return_bus_arrival_date" string="Arrival Date"
                                                   help="Expected date of arrival on return"/>
                                            <field name="return_bus_arrival_flexible" string="Flexible by 2 days"
                                                   help="Check if your arrival date can be adjusted by ¬±2 days"/>
                                        </group>
                                    </group>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Section 4: Accommodation -->
                        <div class="o_form_section_card">
                            <div class="o_section_header">
                                <span class="o_section_icon">üõè</span>
                                <h2>Accommodation</h2>
                            </div>
                            <div class="o_section_content">
                                <group>
                                    <field name="accommodation_needed" string="Do you need accommodation?" widget="radio" 
                                           options="{'horizontal': true}"
                                           help="Select 'Yes' if you need accommodation booking during your trip"/>
                                </group>
                                
                                <div invisible="accommodation_needed != 'yes'">
                                    <group>
                                        <group string="Accommodation Details">
                                            <field name="accommodation_number_of_people" string="Number of People"
                                                   help="Total number of people requiring accommodation (including you)"/>
                                            <field name="accommodation_residence_city" string="City" placeholder="E.g., Rome"
                                                   help="City where you need accommodation"/>
                                            <field name="accommodation_check_in_date" string="Check-in Date"
                                                   help="Date you will check in to the accommodation"/>
                                            <field name="accommodation_check_out_date" string="Check-out Date"
                                                   help="Date you will check out from the accommodation"/>
                                        </group>
                                        <group string="Preferences">
                                            <field name="accommodation_points_of_interest" string="Points of Interest" 
                                                   widget="text" placeholder="E.g., Close to university, near city center"
                                                   help="Preferred location or proximity to specific points of interest"/>
                                            <field name="accommodation_need_24h_reception" string="Need 24-hour reception?"
                                                   help="Select if you require 24-hour reception service"/>
                                        </group>
                                    </group>
                                    
                                    <!-- Accompanying Person Details -->
                                    <div class="o_accompanying_persons_section">
                                        <h3>Accompanying Persons</h3>
                                        <field name="accompanying_person_ids" nolabel="1" context="{'default_business_trip_id': id}"
                                               help="Add details of any persons accompanying you on this trip">
                                            <list editable="bottom">
                                                <field name="full_name" string="Full Name"/>
                                                <field name="identity_document" widget="binary" filename="identity_document_filename" string="Identity Document"/>
                                                <field name="identity_document_filename" column_invisible="True"/>
                                            </list>
                                        </field>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- Save & Done button at bottom - only visible when form is awaiting completion -->
                    <div class="o_form_buttons_bottom" invisible="form_completion_status != 'awaiting_completion'">
                        <button name="action_save_and_complete_form" string="Save &amp; Done" type="object" 
                                class="btn-success o_form_button_save_done"/>
                    </div>
                </sheet>
            </form>
        </field>
    </record>
</odoo>
